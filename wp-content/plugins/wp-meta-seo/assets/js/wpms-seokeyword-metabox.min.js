!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e){function n(t,e){return r(t)||s(t,e)||o(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function s(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,a=t}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return n}}function r(t){if(Array.isArray(t))return t}!function(t,e){var i=t.select,o=t.subscribe,a=function(){var t=this;this.init=function(){t.bindEvents(),t.tagsElement.bind("itemAdded itemRemoved",t.bindEvents),t.metaTitleElement.bind("keyup",t.bindEvents),t.metaDescElement.bind("keyup",t.bindEvents)},this.bindEvents=function(){void 0!==wp.blocks?(t.title=i("core/editor").getEditedPostAttribute("title"),t.content=i("core/editor").getEditedPostAttribute("content")):(t.title=e("#title").val(),"undefined"!=typeof tinyMCE&&null!==tinyMCE.get("content")?t.content=tinyMCE.editors.content.getContent():t.content=e("#content").val()),t.listTags=t.tagsElement.tagsinput("items"),t.analytics()},this.editPost=function(e){void 0!==e&&(t.title=e.title,t.content=e.content),t.listTags=t.tagsElement.tagsinput("items"),t.analytics()},this.analytics=function(){if(t.resultAnalytics={keyInTitle:t.collectKeywordsInTitle(),keyInContent:t.collectKeywordsInContent(),keyInContentHeading:t.collectKeywordsInHeading(),keyInMetaTitle:t.collectKeywordsInMetaTitle(),keyInMetaDescription:t.collectKeywordsInMetaDesc()},null!==t.resultAnalytics){var e=!1;Object.entries(t.resultAnalytics).forEach(function(i){var o=n(i,2),a=o[0],s=o[1];s&&(e=!0),t.changeAnalyticsInfo(a,s)}),t.editAnalyticsInfo(e)}},this.editAnalyticsInfo=function(n){if(""===e("input#metaseo_wpmseo_specific_keywords").val())return e('div.metaseo_analysis[data-title="seokeyword"]').hide(),e(".seokeyword-information").hide(),e('input.wpms_analysis_hidden[name="wpms[seokeyword]"]').val(0),t.reDrawInactive(7),!1;e('div.metaseo_analysis[data-title="seokeyword"]').show(),e(".seokeyword-information").show(),n?(e('div.metaseo_analysis[data-title="seokeyword"]').find("i").removeClass("icons-mboxwarning").addClass("icons-mboxdone").html("done"),e('input.wpms_analysis_hidden[name="wpms[seokeyword]"]').val(1)):(e('div.metaseo_analysis[data-title="seokeyword"]').find("i").removeClass("icons-mboxdone").addClass("icons-mboxwarning").html("error_outline"),e('input.wpms_analysis_hidden[name="wpms[seokeyword]"]').val(0)),t.reDrawInactive(8)},this.reDrawInactive=function(t){for(var n=e(".panel-left .wpms_analysis_hidden"),i=0,o=0;o<n.length;o++)1==e(n[o]).val()&&i++;var a=Math.ceil(100*i/t);e("#wpmetaseo_seo_keywords_result").val(a),e(".metaseo-progress-bar").circleProgress("value",a/100).on("circle-animation-progress",function(t,n){e(this).find("strong").html(a+"<i>%</i>")})},this.changeAnalyticsInfo=function(t,n){n?(e('div.metaseo_analysis[data-title="'+t.toLowerCase()+'"]').find("i").removeClass("icons-mboxwarning").addClass("icons-mboxdone").html("done"),e('input.wpms_analysis_hidden[name="wpms['+t.toLowerCase()+']"]').val(1)):(e('div.metaseo_analysis[data-title="'+t.toLowerCase()+'"]').find("i").removeClass("icons-mboxdone").addClass("icons-mboxwarning").html("error_outline"),e('input.wpms_analysis_hidden[name="wpms['+t.toLowerCase()+']"]').val(0))},this.collectKeywordsInTitle=function(){var e={text:t.title},n=!1;return t.listTags.forEach(function(t,i){if(e.text.toLowerCase().includes(t.toLowerCase()))return n=!0}),n},this.collectKeywordsInContent=function(){var e={text:t.content},n=!1;return t.listTags.forEach(function(t,i){if(e.text.toLowerCase().includes(t.toLowerCase()))return n=!0}),n},this.collectKeywordsInHeading=function(){var e={text:t.content},n=!1;return t.listTags.forEach(function(t,i){var o=RegExp("<h[2-6][^>]*>.*"+t.toLowerCase()+".*</h[2-6]>","gi");if(null!=e.text.toLowerCase().match(o))return n=!0}),n},this.collectKeywordsInMetaTitle=function(){var e={text:t.replaceVariables(t.metaTitleElement.val())},n=!1;return t.listTags.forEach(function(t,i){if(e.text.toLowerCase().includes(t.toLowerCase()))return n=!0}),n},this.collectKeywordsInMetaDesc=function(){var e={text:t.replaceVariables(t.metaDescElement.val())},n=!1;return t.listTags.forEach(function(t,i){if(e.text.toLowerCase().includes(t.toLowerCase()))return n=!0}),n},this.replaceVariables=function(e){if(void 0!==e){t.title&&(e=e.replace(/%title%/g,t.title.replace(/(<([^>]+)>)/gi,""))),e=e.replace(/%id%/g,wpmseoMetaboxL10n.id),e=e.replace(/%date%/g,wpmseoMetaboxL10n.date),e=e.replace(/%sitedesc%/g,wpmseoMetaboxL10n.sitedesc),e=e.replace(/%sitename%/g,wpmseoMetaboxL10n.sitename),e=e.replace(/%sep%/g,wpmseoMetaboxL10n.sep),e=e.replace(/%page%/g,wpmseoMetaboxL10n.page),e=e.replace(/%currenttime%/g,wpmseoMetaboxL10n.currenttime),e=e.replace(/%currentdate%/g,wpmseoMetaboxL10n.currentdate),e=e.replace(/%currentday%/g,wpmseoMetaboxL10n.currentday),e=e.replace(/%currentmonth%/g,wpmseoMetaboxL10n.currentmonth),e=e.replace(/%currentyear%/g,wpmseoMetaboxL10n.currentyear);var n="";jQuery("#excerpt").length&&(n=msClean(jQuery("#excerpt").val().replace(/(<([^>]+)>)/gi,"")),e=e.replace(/%excerpt_only%/g,n)),""===n&&jQuery("#content").length&&(n=jQuery("#content").val().replace(/(<([^>]+)>)/gi,"").substring(0,wpmseoMetaboxL10n.wpmseo_meta_desc_length-1)),e=e.replace(/%excerpt%/g,n),jQuery("#parent_id").length&&jQuery("#parent_id option:selected").text()!==wpmseoMetaboxL10n.no_parent_text&&(e=e.replace(/%parent_title%/g,jQuery("#parent_id option:selected").text()));var i=wpmseoMetaboxL10n.sep.replace(/[\-\[\]\/\{}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),o=new RegExp(i+" "+i,"g");return e=e.replace(o,wpmseoMetaboxL10n.sep)}},this.title=null,this.content=null,this.tagsElement=e("#metaseo_wpmseo_specific_keywords"),this.metaTitleElement=e("#metaseo_wpmseo_title"),this.metaDescElement=e("#metaseo_wpmseo_desc"),this.listTags=[],this.resultAnalytics=null,this.editPost=this.editPost.bind(this),this.init=this.init.bind(this),this.replaceVariables=this.replaceVariables.bind(this)},s=function(){var t=this;this.init=function(){o(function(){var e=i("core/editor").getEditedPostAttribute("title");void 0!==e&&null===t.data.title&&(t.data.title=e),void 0!==e&&e!==t.data.title&&(t.data.title=e,t.changeTitle());var n=i("core/editor").getEditedPostAttribute("content");void 0!==n&&null===t.data.content&&(t.data.content=n),void 0!==n&&n!==t.data.content&&(t.data.content=n,t.changeContent())})},this.changeTitle=function(){(new a).editPost(t.data)},this.changeContent=function(){(new a).editPost(t.data)},this.data={title:null,content:null}},r=function(){var t=this;this.init=function(){e("#title").on("keyup",t.changeTitle),"undefined"!=typeof tinyMCE&&null!==tinyMCE.get("content")?tinyMCE.get("content").on("keyup",t.changeContent):e("#content").on("keyup",t.changeContent)},this.getData=function(){t.data.title=e("#title").val(),"undefined"!=typeof tinyMCE&&null!==tinyMCE.get("content")?t.data.content=tinyMCE.editors.content.getContent():t.data.content=e("#content").val()},this.changeTitle=function(){t.getData(),(new a).editPost(t.data)},this.changeContent=function(){t.getData(),(new a).editPost(t.data)},this.data={title:null,content:null}};e(document).ajaxComplete(function(t,e,n){void 0!==n.data&&n.data.includes("action=wpms&task=reload_analysis")&&(void 0!==wp.blocks?(new s).init():(new r).init(),(new a).init())})}(wp.data,jQuery)}]);